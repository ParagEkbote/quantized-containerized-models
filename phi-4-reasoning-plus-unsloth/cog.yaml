build:
  cog_runtime: true
  gpu: true
  cuda: "12.4"
  python_version: "3.10"
  system_packages:
    - "git"
    - "cmake"
    - "ninja-build"
  run:
    # Update apt, install git (system level)
    - command: apt-get update && apt-get install -y git
    - command: apt-get clean && rm -rf /var/lib/apt/lists/*
    # Install uv (binary, faster than pip)
    - command: pip install uv
    # Install Python deps with uv into system Python
    - command: uv pip install --system packaging wheel ninja cmake torch
    - command: uv pip install --system -U flash-attn --no-build-isolation
    - command: uv pip install --system transformers accelerate unsloth unsloth_zoo

predict: "predict.py:Predictor"
